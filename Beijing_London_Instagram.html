<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        /*body {background-color: black;}*/
        body { margin:0; padding:0; }
        #london { position:absolute; top:0; bottom:0; width:100%; }
        #beijing { position:absolute; top:0; bottom:0; width:100%; }

    </style>
</head>

<body>
<style>

#london {
    position: fixed;
    width:37%;
}

#features {
    width: 26%;
    margin-left: 37%;
    font-family: sans-serif;
    overflow-y: scroll;
    background-color: #fff;
}

#beijing {
    position: fixed;
    margin-left:63%;
    width:37%;
}

#menu {
        position: fixed;
        background: #fff;
        padding: 10px;
        opacity: .8;
        margin-left: 38%;
        /*font-family: 'Open Sans', sans-serif;*/
        font-family: "Lucida Bright", Georgia, serif;
        /*font-family: Garamond, Baskerville, "Baskerville Old Face", "Hoefler Text", "Times New Roman", serif;*/
        /*font-family: "Arial Black", "Arial Bold", Gadget, sans-serif;*/
    }

section {
    padding:  25px 25px;
    line-height: 25px;
    border-bottom: 1px solid #ddd;
    opacity: 0.25;
    font-size: 13px;
    margin-top: 25px;
}
section.active {
    opacity: 1;
}
section:last-child {
    border-bottom: none;
    margin-bottom: 200px;
}
</style>
<div id="london" "></div>
<div id="beijing" "></div>
<!-- <div id="london" style="top: 0px; left: 0px; width:470px; height:800px; float: left"></div> -->
<!-- <div id="beijing" style="top: 0px; right: 0px; width:470px; height:800px"></div> -->
<div id='menu'>
    <input id='streets' type='radio' name='rtoggle' value='streets' checked='checked'>
    <label for='streets'>Streets</label>
    <input id='light' type='radio' name='rtoggle' value='light'>
    <label for='light'>Light</label>
    <input id='dark' type='radio' name='rtoggle' value='dark'>
    <label for='dark'>Dark</label>
    <input id='satellite' type='radio' name='rtoggle' value='satellite'>
    <label for='satellite'>Satellite</label>
</div>

<div id='features'>
    <section id='Top one' class='active'>
        <h2 style="color:#2874A6 ;  text-align:left;"><b>&#9754; Hyde Park</b></h2>
        <p style="text-align:left;">Hyde Park is one of London's finest landscapes and covers 350 acres. Every year millions of Londoners and tourists visit Hyde Park, one of the capital's eight Royal Parks. The park also offers various recreational activities including open water swimming, boating, cycling, tennis and horse riding. Moreover, it is home to a number of famous landmarks including the Serpentine Lake, Speakers' Corner and the Diana, Princess of Wales Memorial Fountain.</p>
        <small id="citation">
            Retrieved from <a href='https://www.royalparks.org.uk/parks/hyde-park/about-hyde-park'>The Royal Parks</a>
        </small>
        <h2 style="color:#922B21;  text-align:right;"><b>Forbidden City &#9755;</b></h2>
        <p style="text-align:right;">Located in the heart of Beijing, the Palace Museum – also known as the Forbidden City – was home to China’s emperors and was the highest center of power for approximately 500 years. It attracts more than 14 million visitors annually.  Starting this summer, the Forbidden City will enact measures to regulate visitation in order to allow time for renovations and restoration of the Palace’s architecture and cultural relics. - See more at: http://www.cnto.org/forbidden-city-to-regulate-visitor-numbers/#sthash.sDqadBMI.dpuf</p>
        <small id="citation">
            Retrieved from <a href='http://www.cnto.org/forbidden-city-to-regulate-visitor-numbers/'>China National Tourist Office</a>
        </small>
    </section>
    <section id='Top two' >
        <h2 style="color:#2874A6 ;  text-align:left;"> &#9754; Madame Tussauds London</h2>
        <p style="text-align:left;">Madame Tussauds is a wax museum in London with smaller museums in a number of other major cities. It was founded by wax sculptor Marie Tussaud. It used to be known as "Madame Tussaud's"; the apostrophe is no longer used.Madame Tussauds is a major tourist attraction in London, displaying the waxworks of famous and historic peoples and also the film characters. Madame Tussaud's London, has been visited by over 200 million visitors since it began 200 years ago. Currently, over 2.5 million people a year visit Madame Tussaud's, mingling with celebrities of all types, from sports heroes like Muhammad Ali to Hollywod celebrities like Marilyn Monroe to models like Naomi Campbell and politicians like Bill Clinton.</p>
        <small id="citation">
            Retrieved from <a href='https://en.wikipedia.org/wiki/Madame_Tussauds'>Wikipedia</a>
        </small>
        <small id="citation">
            and <a href='http://madame-tussauds.visit-london-england.com/'>Visit London England</a>
        </small>
        <h2 style="color:#922B21;  text-align:right;">Wangfujing Street &#9755;</h2>
        <p style="text-align:right;">Wangfujing Street is the most well-known and prosperous business street with modern and fashion trends. Located near the city center in Dongcheng District, the commercial street is one of four most prosperous business zones in Beijing. It is 1 mile (1,600 meters) long ranging from Changan Avenue in the south to National Art Museum of China in the north. With a history of 700 years around, it got the name Wangfu (royal mansion) Jing (well) because there used to be eight royal mansions and a well with sweet water on the street. Currently, it is the busiest street in this city and there are 600,000 people every day come and go and on holidays, the number can rise to 1,200,000.</p>
        <small id="citation">
            Retrieved from <a href='https://www.travelchinaguide.com/cityguides/beijing/shopping/wangfujing-dajie/'>Travel China Guide</a>
        </small>
    </section>
    <section id='Top three'>
        <h2 style="color:#2874A6 ;  text-align:left;">&#9754; Regent Street</h2>
        <p style="text-align:left;">Regent Street is one of the capital's most famous thoroughfares. Every year, more than 70 million visitors come to shop as well as relax and dine within the stylish cafes, restaurants and bars located along Regent Street such as Aqua and Hawksmoor, and within the Regent Street food quarters of Heddon Street and Swallow Street, such as Bentley’s, Veeraswamy, Gaucho, Momo, and Aubaine. Also, there are over 20,000 people employed here.</p>
        <small id="citation">
            Retrieved from <a href='http://www.visitlondon.com/things-to-do/place/64061-regent-street#2ZU1MJfyG6foQtIv.97'>Visit London</a>
            and <a href='http://www.regentstreetonline.com/about'>Regent Street</a>
        </small>
        <h2 style="color:#922B21;  text-align:right;">Qianmen Street &#9755;</h2>
        <p style="text-align:right;">Qianmen Street is a famous pedestrian street. It is 840 meters (about 919 yards) in length and 21 meters (about 23 yards) in width. It is composed with buildings whose styles resemble the late Qing Dynasty (1644 - 1911). It has history of more than 570 years. It was called Zhengyangmen Street during the Ming and Qing Dynasties, and finally got the present name in 1965. </p>
        <small id="citation">
            Retrieved from <a href='https://www.travelchinaguide.com/attraction/beijing/qianmen-street.htm'>Travel China Guide</a>
        </small>
    </section>
    <section id='Top four'>
        <h2 style="color:#2874A6 ;  text-align:left;">&#9754; Oxford Street</h2>
        <p style="text-align:left;">Oxford Street is a major road in the City of Westminster in the West End of London, running from Marble Arch to Tottenham Court Road via Oxford Circus. It is Europe's busiest shopping street, with around half a million daily visitors, and as of 2012 had approximately 300 shops.With over 200 million visitors a year, more than 300 shops and 5 million square feet of retail space, Oxford Street lays claim to being London's busiest street. The opening of Debenhams and Selfridges in 1909 marked the beginning of the street's dominance as a shopping centre. </p>
        <small id="citation">
            Retrieved from <a href='https://en.wikipedia.org/wiki/Oxford_Street'>Wikipedia</a>
            and <a href='http://www.londontown.com/LondonInformation/Attraction/Oxford_Street/892f/'>LondonTown</a>
        </small>
        <h2 style="color:#922B21;  text-align:right;">Xidan &#9755;</h2>
        <p style="text-align:right;">Xidan began to develop in the Ming Dynasty as an area alongside the passage for traders from Southwestern China to enter Beijing. Restaurants and shops were eventually built for these merchants. Eventually, as the Western part of the city became the residential area for officials, Xidan became a commercial area. The location of several government agencies when Beijing was under the administration of the Republic of China also helped Xidan's economic growth.</p>
        <small id="citation">
            Retrieved from <a href='https://en.wikipedia.org/wiki/Xidan'>Wikipedia</a>
        </small>
    </section>
    <section id='Top five'>
        <h2 style="color:#2874A6 ;  text-align:left;">&#9754; Carnaby Street</h2>
        <p style="text-align:left;">There is no dispute, Carnaby has an iconic heritage. From being the birthplace of Swinging London in the 1960’s, the home of Mods, Skinheads, Punks and New Romantics to the street style tribes of today. Carnaby has and always will be the epicentre of culture and lifestyle in London’s West End. More than 44 million people pass through the streets every year.</p>
        <small id="citation">
            Retrieved from <a href='https://www.carnaby.co.uk/history/'>Carnaby</a>
        </small>
        <h2 style="color:#922B21;  text-align:right;">The Great Wall &#9755;</h2>
        <p style="text-align:right;">The Great Wall in Beijing totals 370 miles (600 kilometers). Those from Ming Dynasty (1368-1644), the last dynasty engaged in Great Wall construction, amount to 350 miles (550 kilometers). They are distributed in Pinggu, Miyun, Huairou, Yanqing, Changping, and Mentougou. After the Great Wall opened to the public as a tourist attraction, hundreds of millions of visitors have been to its various sections. Badaling section is the most visited section (63,000,000 visitors in 2001). In peak seasons, the visitor flow can be up to 70,000 per day.</p>
        <small id="citation">
            Retrieved from <a href='http://www.chinahighlights.com/greatwall/'>China Highlights</a>
        </small>
    </section>
</div>

<script type="text/javascript">
mapboxgl.accessToken = 'pk.eyJ1IjoibGlzYXNhc2FzYSIsImEiOiJjajJndjhmdHEwMDBoMzNtdnF0MjNvYjV1In0.LK1-VqSfhFRIEs8yvpmu8Q';

var london = new mapboxgl.Map({
    container: 'london',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [-0.163222, 51.502741],
    zoom: 13.5,
    bearing: 27,
    pitch: 19.5
});

london.on('style.load', function() {
    london.addLayer({
        'id': '3d-buildings',
        'source': 'composite',
        'source-layer': 'building',
        'filter': ['==', 'extrude', 'true'],
        'type': 'fill-extrusion',
        'minzoom': 15,
        'paint': {
            'fill-extrusion-color': '#2874A6',
            'fill-extrusion-height': {
                'type': 'identity',
                'property': 'height'
            },
            'fill-extrusion-base': {
                'type': 'identity',
                'property': 'min_height'
            },
            'fill-extrusion-opacity': .4
        }
    });
});

var chaptersLeft = {
    'Top one': {
        bearing: 46.02,
        center: [-0.163222, 51.502741],
        zoom: 13.5,
        pitch: 19.5
    },
    'Top two': {
        // duration: 6000,
        center: [-0.155436, 51.522636],
        bearing: 40.0,
        zoom: 18.82,
        pitch: 60
    },
    'Top three': {
        bearing: 5.02,
        center: [-0.139505, 51.512115],
        zoom: 15.34,
        speed: 0.6,
        pitch: 0
    },
    'Top four': {
        bearing: 65.02,
        center: [-0.145635, 51.514574],
        zoom: 16.72,
        pitch: 30

    },
    'Top five': {
        bearing: -175.2,
        center: [-0.138485, 51.512175],
        zoom: 16.963,
        pitch: 50,
        speed: 0.5
    }
};
london.on('style.load', function () {
    london.addLayer({
        "id": "places",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Madame Tussauds London</strong><p><a href=\"https://https://www.madametussauds.com/london/en/www/\" target=\"_blank\">Madame Tussauds</a> is a wax museum in London with smaller museums in a number of other major cities.</p>",
                        "icon": "star"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-0.154978, 51.523070]
                    }
                }]
            }
        },
        "layout": {
            "icon-image": "{icon}-15",
            "icon-allow-overlap": true
        }
    });
    london.on('click', 'places', function (e) {
        new mapboxgl.Popup()
            .setLngLat(e.features[0].geometry.coordinates)
            .setHTML(e.features[0].properties.description)
            .addTo(london);
    });

    // Change the cursor to a pointer when the mouse is over the places layer.
    london.on('mouseenter', 'places', function () {
        london.getCanvas().style.cursor = 'pointer';
    });

    // Change it back to a pointer when it leaves.
    london.on('mouseleave', 'places', function () {
        london.getCanvas().style.cursor = '';
    });
});

var beijing = new mapboxgl.Map({
    container: 'beijing',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [116.402707, 39.906284],
    zoom: 11.3,
    bearing: 0,
    pitch: 0
});
beijing.on('style.load', function() {
    beijing.addLayer({
        'id': '3d-buildings',
        'source': 'composite',
        'source-layer': 'building',
        'filter': ['==', 'extrude', 'true'],
        'type': 'fill-extrusion',
        'minzoom': 15,
        'paint': {
            'fill-extrusion-color': '#922B21',
            'fill-extrusion-height': {
                'type': 'identity',
                'property': 'height'
            },
            'fill-extrusion-base': {
                'type': 'identity',
                'property': 'min_height'
            },
            'fill-extrusion-opacity': .4
        }
    });
});
var chaptersRight = {
    'Top one': {
        bearing: 0,
        center: [116.402707, 39.906284],
        zoom: 11.3,
        pitch: 0
    },
    'Top two': {
        // duration: 6000,
        center: [116.406535, 39.916219],
        bearing: 10,
        zoom: 14.62,
        pitch: 10
    },
    'Top three': {
        bearing: 0,
        center: [116.392370, 39.895407],
        zoom: 15,
        speed: 0.6,
        pitch: 40
    },
    'Top four': {
        bearing: 30,
        pitch:20,
        center: [116.368656, 39.910062],
        zoom: 14.19
    },
    'Top five': {
        bearing: 0,
        center: [115.931521, 40.348114],
        zoom: 9.8,
        pitch: 0,
        speed: 0.5
    }
};

var layerList = document.getElementById('menu');
var inputs = layerList.getElementsByTagName('input');

function switchLayer(layer) {
    var layerId = layer.target.id;
    london.setStyle('mapbox://styles/mapbox/' + layerId + '-v9');
    beijing.setStyle('mapbox://styles/mapbox/' + layerId + '-v9');

}

for (var i = 0; i < inputs.length; i++) {
    inputs[i].onclick = switchLayer;
}

// On every scroll event, check which element is on screen
window.onscroll = function() {
    var chapterNames = Object.keys(chaptersLeft);
    for (var i = 0; i < chapterNames.length; i++) {
        var chapterName = chapterNames[i];
        if (isElementOnScreen(chapterName)) {
            setActiveChapter(chapterName);
            break;
        }
    }
};

var activeChapterName = 'Top one';
function setActiveChapter(chapterName) {
    if (chapterName === activeChapterName) return;

    london.flyTo(chaptersLeft[chapterName]);
    beijing.flyTo(chaptersRight[chapterName]);


    document.getElementById(chapterName).setAttribute('class', 'active');
    document.getElementById(activeChapterName).setAttribute('class', '');

    activeChapterName = chapterName;


}

function isElementOnScreen(id) {
    var element = document.getElementById(id);
    var bounds = element.getBoundingClientRect();
    return bounds.top < window.innerHeight && bounds.bottom > 0;
}


</script>


</body>
</html>